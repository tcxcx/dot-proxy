var d=Object.defineProperty;var E=Object.getOwnPropertyDescriptor;var C=Object.getOwnPropertyNames;var K=Object.prototype.hasOwnProperty;var M=(s,e,r)=>e in s?d(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r;var D=(s,e)=>{for(var r in e)d(s,r,{get:e[r],enumerable:!0})},$=(s,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of C(e))!K.call(s,t)&&t!==r&&d(s,t,{get:()=>e[t],enumerable:!(n=E(e,t))||n.enumerable});return s};var L=s=>$(d({},"__esModule",{value:!0}),s);var A=(s,e,r)=>(M(s,typeof e!="symbol"?e+"":e,r),r);var j={};D(j,{state:()=>V});module.exports=L(j);var S=require("rxjs");var u=require("rxjs");var i={};var P=(s,e,r=u.noop)=>{let n,t,a=0,l=i,f,m=e===i?u.noop:()=>{l===i&&n&&n.next(l=e)},c=new u.Observable(o=>{o.complete=u.noop,a++;let O;o.add(()=>{a--,O.unsubscribe(),a===0&&(l=i,t&&t.unsubscribe(),r(),n=null,t=null,f=null)}),n?(O=n.subscribe(o),l!==i&&o.next(l)):(n=new u.Subject,O=n.subscribe(o),t=null,t=new u.Subscriber({next(b){n.next(l=b)},error(b){let g=n;t=null,n=null,g.error(b)},complete(){t=null,m(),n.complete()}}),s.subscribe(t),m())});c.getRefCount=()=>a;let p=new Error("No subscribers");return c.getComplete$=()=>new u.Observable(o=>{if(a===0){o.error(p);return}if(!t){o.next(!0),o.complete();return}return o.next(!1),n.subscribe({complete(){o.next(!0),o.complete()}})}),c.getValue=()=>{if(a===0)throw p;return l!==i?l:f||(f=new Promise((o,O)=>{let b=T=>{O(T),f=null},g=n.subscribe({next(T){g.unsubscribe(),o(T),f=null},error:b,complete(){b(new Error("Empty observable"))}});t.add(g),t.add(()=>{b(p)})}))},e!==i&&(c.getDefaultValue=()=>e),c},v=P;function w(s,e){e.getValue=s.getValue,e.getRefCount=s.getRefCount,e.getComplete$=s.getComplete$,s.getDefaultValue&&(e.getDefaultValue=s.getDefaultValue)}function h(s,e){let r=new y,n=typeof e=="function"?e:()=>e,t=a=>{for(let o=a.length-1;a[o]===void 0&&o>-1;o--)a.splice(-1);let l=[a.length,...a],f=r.get(l);if(f!==void 0)return f;let m=v(new S.Observable(o=>s(...a).subscribe(o)),n(...a),()=>{r.delete(l)}),c=new S.Observable(o=>{let O=r.get(l),b=m;return O?O!==c&&(b=O,w(b,c)):r.set(l,p),b.subscribe(o)});w(m,c);let p=c;return r.set(l,p),p};return(...a)=>t(a)}var y=class{constructor(){A(this,"root");this.root=new Map}get(e){let r=this.root;for(let n=0;n<e.length;n++)if(r=r.get(e[n]),!r)return;return r}set(e,r){let n=this.root,t;for(t=0;t<e.length-1;t++){let a=n.get(e[t]);a||(a=new Map,n.set(e[t],a)),n=a}n.set(e[t],r)}delete(e){let r=[this.root],n=this.root;for(let a=0;a<e.length-1;a++)r.push(n=n.get(e[a]));let t=r.length-1;for(r[t].delete(e[t]);--t>-1&&r[t].get(e[t]).size===0;)r[t].delete(e[t])}};function x(s,e){return v(s,e)}function V(s,e){return(typeof s=="function"?h:x)(s,arguments.length>1?e:i)}
//# sourceMappingURL=rxjs-state.cjs.production.min.js.map
