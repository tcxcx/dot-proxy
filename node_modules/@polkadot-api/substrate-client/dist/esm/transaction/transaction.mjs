import '@polkadot-api/utils';
import { noop } from '../internal-utils/noop.mjs';
import { transaction } from '../methods.mjs';

const getTransaction = (request) => (tx, error) => {
  let cancel = request(transaction.broadcast, [tx], {
    onSuccess: (subscriptionId) => {
      cancel = subscriptionId === null ? noop : () => {
        request(transaction.stop, [subscriptionId]);
      };
      if (subscriptionId === null) {
        error(new Error("Max # of broadcasted transactions has been reached"));
      }
    },
    onError: error
  });
  return () => {
    cancel();
  };
};

export { getTransaction };
//# sourceMappingURL=transaction.mjs.map
