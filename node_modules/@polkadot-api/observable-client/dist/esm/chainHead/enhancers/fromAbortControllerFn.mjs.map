{"version":3,"file":"fromAbortControllerFn.mjs","sources":["../../../../src/chainHead/enhancers/fromAbortControllerFn.ts"],"sourcesContent":["import { Observable } from \"rxjs\"\n\nexport const fromAbortControllerFn =\n  <A extends Array<any>, T>(\n    fn: (...args: [...A, ...[abortSignal: AbortSignal]]) => Promise<T>,\n  ) =>\n  (...args: A): Observable<T> =>\n    new Observable((observer) => {\n      let aborter: AbortController | undefined = new AbortController()\n\n      fn(...[...args, aborter.signal]).then(\n        (value: any) => {\n          observer.next(value)\n          observer.complete()\n        },\n        (error: any) => {\n          observer.error(error)\n        },\n      )\n\n      return () => {\n        observer.unsubscribe()\n        aborter!.abort()\n        aborter = undefined\n      }\n    })\n"],"names":[],"mappings":";;AAEa,MAAA,qBAAA,GACX,CACE,EAEF,KAAA,CAAA,GAAI,SACF,IAAI,UAAA,CAAW,CAAC,QAAa,KAAA;AAC3B,EAAI,IAAA,OAAA,GAAuC,IAAI,eAAgB,EAAA;AAE/D,EAAA,EAAA,CAAG,GAAG,CAAC,GAAG,MAAM,OAAQ,CAAA,MAAM,CAAC,CAAE,CAAA,IAAA;AAAA,IAC/B,CAAC,KAAe,KAAA;AACd,MAAA,QAAA,CAAS,KAAK,KAAK,CAAA;AACnB,MAAA,QAAA,CAAS,QAAS,EAAA;AAAA,KACpB;AAAA,IACA,CAAC,KAAe,KAAA;AACd,MAAA,QAAA,CAAS,MAAM,KAAK,CAAA;AAAA;AACtB,GACF;AAEA,EAAA,OAAO,MAAM;AACX,IAAA,QAAA,CAAS,WAAY,EAAA;AACrB,IAAA,OAAA,CAAS,KAAM,EAAA;AACf,IAAU,OAAA,GAAA,MAAA;AAAA,GACZ;AACF,CAAC;;;;"}