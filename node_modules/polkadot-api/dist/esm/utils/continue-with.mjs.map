{"version":3,"file":"continue-with.mjs","sources":["../../../src/utils/continue-with.ts"],"sourcesContent":["import { Observable } from \"rxjs\"\n\nlet NOTIN = {}\nexport const continueWith =\n  <I, O>(\n    mapper: (input: I) => Observable<O>,\n  ): ((source: Observable<I>) => Observable<I | O>) =>\n  (source) =>\n    new Observable((observer) => {\n      let latestValue: I = NOTIN as I\n      let subscription = source.subscribe({\n        next(v) {\n          observer.next((latestValue = v))\n        },\n        error(e) {\n          observer.error(e)\n        },\n        complete() {\n          if (latestValue === NOTIN) observer.complete()\n          else subscription = mapper(latestValue).subscribe(observer)\n        },\n      })\n\n      return () => {\n        subscription.unsubscribe()\n      }\n    })\n"],"names":[],"mappings":";;AAEA,IAAI,QAAQ,EAAC;AACA,MAAA,YAAA,GACX,CACE,MAEF,KAAA,CAAC,WACC,IAAI,UAAA,CAAW,CAAC,QAAa,KAAA;AAC3B,EAAA,IAAI,WAAiB,GAAA,KAAA;AACrB,EAAI,IAAA,YAAA,GAAe,OAAO,SAAU,CAAA;AAAA,IAClC,KAAK,CAAG,EAAA;AACN,MAAS,QAAA,CAAA,IAAA,CAAM,cAAc,CAAE,CAAA;AAAA,KACjC;AAAA,IACA,MAAM,CAAG,EAAA;AACP,MAAA,QAAA,CAAS,MAAM,CAAC,CAAA;AAAA,KAClB;AAAA,IACA,QAAW,GAAA;AACT,MAAI,IAAA,WAAA,KAAgB,KAAO,EAAA,QAAA,CAAS,QAAS,EAAA;AAAA,WACzB,YAAA,GAAA,MAAA,CAAO,WAAW,CAAA,CAAE,UAAU,QAAQ,CAAA;AAAA;AAC5D,GACD,CAAA;AAED,EAAA,OAAO,MAAM;AACX,IAAA,YAAA,CAAa,WAAY,EAAA;AAAA,GAC3B;AACF,CAAC;;;;"}