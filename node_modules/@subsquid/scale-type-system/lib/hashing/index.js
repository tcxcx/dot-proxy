"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getTypeHash = void 0;
const dcg_hasher_1 = require("./dcg-hasher");
const type_hasher_1 = require("./type-hasher");
const HASHERS = new WeakMap();
function getTypeHasher(types) {
    let hasher = HASHERS.get(types);
    if (hasher == null) {
        hasher = new type_hasher_1.TypeHasher(types);
        HASHERS.set(types, hasher);
    }
    return hasher;
}
/**
 * Get a strong hash of substrate type, which can be used for equality derivation
 */
function getTypeHash(types, type) {
    let hasher = getTypeHasher(types);
    if (typeof type == 'number') {
        return hasher.getHash(type);
    }
    else {
        return (0, dcg_hasher_1.sha)((0, type_hasher_1.computeHash)(types, hasher, type));
    }
}
exports.getTypeHash = getTypeHash;
//# sourceMappingURL=index.js.map