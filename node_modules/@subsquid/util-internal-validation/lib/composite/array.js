"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ArrayValidator = void 0;
const error_1 = require("../error");
class ArrayValidator {
    constructor(item) {
        this.item = item;
    }
    cast(array) {
        if (!Array.isArray(array))
            return new error_1.ValidationFailure(array, `{value} is not an array`);
        let result = new Array(array.length);
        for (let i = 0; i < array.length; i++) {
            let val = this.item.cast(array[i]);
            if (val instanceof error_1.ValidationFailure) {
                val.path.push(i);
                return val;
            }
            else {
                result[i] = val;
            }
        }
        return result;
    }
    validate(array) {
        if (!Array.isArray(array))
            return new error_1.ValidationFailure(array, `{value} is not an array`);
        for (let i = 0; i < array.length; i++) {
            let err = this.item.validate(array[i]);
            if (err) {
                err.path.push(i);
                return err;
            }
        }
    }
    phantom() {
        return [];
    }
}
exports.ArrayValidator = ArrayValidator;
//# sourceMappingURL=array.js.map