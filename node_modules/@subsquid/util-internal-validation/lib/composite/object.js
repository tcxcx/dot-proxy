"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ObjectValidator = void 0;
const error_1 = require("../error");
class ObjectValidator {
    constructor(props) {
        this.props = props;
    }
    cast(object) {
        if (typeof object != 'object' || !object)
            return new error_1.ValidationFailure(object, `{value} is not an object`);
        let result = {};
        for (let key in this.props) {
            let val = this.props[key].cast(object[key]);
            if (val === undefined)
                continue;
            if (val instanceof error_1.ValidationFailure) {
                val.path.push(key);
                return val;
            }
            result[key] = val;
        }
        return result;
    }
    validate(object) {
        if (typeof object != 'object' || !object)
            return new error_1.ValidationFailure(object, `{value} is not an object`);
        for (let key in this.props) {
            let err = this.props[key].validate(object[key]);
            if (err) {
                err.path.push(key);
                return err;
            }
        }
    }
    phantom() {
        throw new Error();
    }
}
exports.ObjectValidator = ObjectValidator;
//# sourceMappingURL=object.js.map